<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Banner ma ºlumoti</title>

<style>
:root {
    --primary:#800000;
    --primary-light:#a00000;
    --primary-shadow:rgba(128,0,0,.25);
    --bg:#f8fafc;
    --surface:#ffffff;
    --text-primary:#800000;
    --text-secondary:#0f172a;
    --text-muted:#64748b;
    --border:#e2e8f0;
    --danger:#c62828;
    --radius-lg:28px;
    --radius-md:24px;
    --radius-sm:20px;
    --transition:all .35s cubic-bezier(.2,.8,.2,1);
    --font-base:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans',sans-serif;
}

*,*::before,*::after{
    margin:0;
    padding:0;
    box-sizing:border-box;
}

html,body{
    height:100%;
    font-family:var(--font-base);
    background:var(--bg);
    color:var(--text-secondary);
    -webkit-font-smoothing:antialiased;
}

.header{
    position:fixed;
    top:0;left:0;right:0;
    height:70px;
    background:var(--primary);
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 6px 20px rgba(0,0,0,.15);
    z-index:1000;
}

.logo{
    display:flex;
    align-items:center;
    gap:14px;
    font-size:26px;
    font-weight:900;
    letter-spacing:-.5px;
}

.logo img{
    width:46px;
    height:46px;
    border-radius:12px;
    object-fit:cover;
    box-shadow:0 2px 8px rgba(0,0,0,.2);
}

.page{
    padding-top:90px;
    padding-bottom:40px;
}

.banner-cover{
    margin:0 16px;
    height:240px;
    border-radius:var(--radius-lg);
    overflow:hidden;
    background:#e5e7eb;
    box-shadow:0 18px 40px var(--primary-shadow);
}

.banner-cover img{
    width:100%;
    height:100%;
    object-fit:cover;
}

.banner-card{
    background:var(--surface);
    margin:24px 16px 0;
    padding:24px;
    border-radius:var(--radius-md);
    box-shadow:0 10px 30px rgba(0,0,0,.06);
}

.banner-title{
    font-size:24px;
    font-weight:800;
    color:var(--text-primary);
    margin-bottom:8px;
}

.banner-date{
    font-size:14px;
    color:var(--text-muted);
    margin-bottom:16px;
}

.banner-desc{
    font-size:16px;
    line-height:1.7;
    color:var(--text-secondary);
    white-space:pre-line;
}

.action-btn{
    margin-top:28px;
    display:flex;
    align-items:center;
    justify-content:center;
    height:54px;
    border-radius:20px;
    background:linear-gradient(135deg,var(--primary),var(--primary-light));
    color:#fff;
    font-weight:700;
    text-decoration:none;
    box-shadow:0 10px 30px var(--primary-shadow);
    transition:var(--transition);
}

.action-btn:active{
    transform:scale(.97);
}

.loading,.error{
    padding:120px 20px;
    text-align:center;
    font-size:16px;
    color:var(--text-muted);
}
.error{color:var(--danger)}
</style>
</head>

<body>

<header class="header">
    <div class="logo">
        <img src="/assets/icon.png" alt="">
        Rout24
    </div>
</header>

<main class="page" id="app">
    <div class="loading">‚è≥ Banner yuklanmoqda...</div>
</main>

<script>
const API_BASE = 'https://api.rout24.online';
const app = document.getElementById('app');

const token = localStorage.getItem('token');

const pathParts = location.pathname.split('/').filter(Boolean);
const bannerId = pathParts[pathParts.length - 1];

if (!bannerId || bannerId === 'banner') {
    app.innerHTML = '<div class="error">‚ùå Banner topilmadi</div>';
} else if (!token) {
    app.innerHTML = '<div class="error">üîí Avtorizatsiya talab qilinadi</div>';
} else {
    fetch(`${API_BASE}/banners/${bannerId}`, {
        headers: {
            Authorization: `Bearer ${token}`
        }
    })
        .then(r => r.json())
        .then(res => {
            if (!res.success || !res.data) {
                app.innerHTML = '<div class="error">‚ùå Ma ºlumot yuklanmadi</div>';
                return;
            }

            const b = res.data;

            app.innerHTML = `
                <section class="banner-cover">
                    <img src="${b.coverImage || ''}" alt="">
                </section>

                <section class="banner-card">
                    <h1 class="banner-title">${b.title || ''}</h1>
                    <div class="banner-date">
                        üìÖ ${new Date(b.createdAt).toLocaleDateString('uz-UZ')}
                    </div>
                    <div class="banner-desc">${b.description || ''}</div>

                    ${b.externalLink ? `
                        <a href="${b.externalLink}" target="_blank" class="action-btn">
                            üåê Batafsil o‚Äòtish
                        </a>
                    ` : ''}
                </section>
            `;
        })
        .catch(() => {
            app.innerHTML = '<div class="error">‚ö†Ô∏è Server bilan bog‚Äòlanib bo‚Äòlmadi</div>';
        });
}
</script>

</body>
</html>
